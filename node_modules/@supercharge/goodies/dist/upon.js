'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
exports.upon = void 0;
const isPromise_1 = require("./isPromise");
const isFunction_1 = require("./isFunction");
const isAsyncFunction_1 = require("./isAsyncFunction");
function upon(value, callback) {
    if (isPromise_1.isPromise(value)) {
        return uponAsync(value, callback);
    }
    if (isAsyncFunction_1.isAsyncFunction(callback)) {
        return uponAsync(value, callback);
    }
    return uponSync(value, callback);
}
exports.upon = upon;
/**
 * Synchronous handling of `upon`.
 *
 * @param {*} value
 * @param {Function} callback
 *
 * @returns {*}
 */
function uponSync(value, callback) {
    if (!callback) {
        return value;
    }
    return isFunction_1.isFunction(callback)
        ? callback(value)
        : value;
}
/**
 * Asynchronous handling of `upon`.
 *
 * @param {*} value
 * @param {Function} callback
 *
 * @returns {*}
 */
async function uponAsync(value, callback) {
    if (isPromise_1.isPromise(value)) {
        value = await value;
    }
    return isFunction_1.isFunction(callback)
        ? callback(value)
        : value;
}
